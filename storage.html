<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->

<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Mega Série HTML5 - Client Side Storage</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
            
            .boxshadow .block {
              box-shadow:0 10px 10px rgba(0, 0, 0, 0.3);
            }
            
            .no-boxshadow .block {
               border: 1px solid #CCC;
               border-bottom: 10px solid #CCC;
               padding: 3px;
               margin-bottom: 20px;
            }
           
          .contact-form input {
            margin: 0 .25rem;
            min-width: 125px;
            border: 1px solid #eee;
            border-left: 3px solid;
            border-radius: 5px;
            transition: border-color .5s ease-out;
          }
        
         .contact-form input:optional {
              border-left-color: #999;
          }
          .contact-form input:required:valid {
            border-left-color: palegreen;
          }
          .contact-form input:invalid {
            border-left-color: salmon;
          }
          .contact-form input:required:focus:valid {
            background: url("/images/check.svg") no-repeat 95% 50%;
            background-size: 25px;
          }
          .contact-form input:focus:invalid {
            background: url("/images/tnt.svg") no-repeat 95% 50%;
            background-size: 45px;
          }
            
        </style>
        
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr/modernizr.js"></script>
        <script src="js/loader.js"></script>
    
        
        <script>
        
        </script>
    
    </head>
    
    
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Meu Projeto HTML5</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
         
        </div><!--/.navbar-collapse -->
      </div>
    </nav>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>HTML5 - Client Side Storage</h1>
        <p>Conjunto de Aulas, onde eu mostro na prática as opções de armazenamendo de dados do lado do cliente que surgiram graças ao HTML5. Quer aprender mais 
        sobre desenvolvimento Web e Hibrido? Então visite meu Blog e Canal</p>
        <p><a class="btn btn-primary btn-lg" href="http://blog.sw9.com.br" role="button">Ir Para o Meu Blog &raquo;</a></p>
      </div>
    </div>
    <div class="container">
       <div class="block">
          <ol class="breadcrumb">
            <li><a href="index.html">Principal</a></li>
            <li class="active"><a href="storage.html">Client Side Storage</a></li>
            
          </ol>
        </div>
    </div>
    
    <div class="container">
      
      <div class="panel panel-default">
          <div class="panel-heading">Escolha o tipo de armazenamento</div>
           
          <div class="panel-body">
          <p>
            
              <div class="btn-group">
                <button type="button" class="btn btn-danger">Tipo de Armazenamento</button>
                <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <span class="caret"></span>
                  <span class="sr-only">Escolha uma opção</span>
                </button>
                <ul class="dropdown-menu">
                  <li><a href="javascript: selectDb('localStorage');">Web Storage - Local Storage</a></li>
                  <li><a href="javascript: selectDb('sessionStorage');">Web Storage - Session Storage</a></li>
                  <li><a href="javascript: selectDb('webSQL');">Web SQL Database</a></li>
                  <li><a href="javascript: selectDb('indexedDb');">Indexed Database (IndexedDB)</a></li>
                  <li><a href="javascript: selectDb('idbp');">Idb Com Promise (idbp)</a></li>
                  <li><a href="javascript: selectDb('idbx');">Idb Com async/await (idbx)</a></li>
                  
                 
                </ul>
              </div>
           
              <span class="label label-info" id="dbSelected"></span>
           
          
          </p>
          </div>            
        </div>
    </div>
    
    <div class="container">
      
      <form class="form-inline contact-form">
        
        <div class="form-group">
          <label for="lblNome">Nome</label>
          <input 
            type="text" 
            class="form-control" 
            id="nome"
            name="contato.nome"
            placeholder="Qual o seu Nome?" 
            required>
        </div>
        <div class="form-group">
          <label for="lblEmail">Email</label>
          <input 
            type="email" 
            class="form-control" 
            id="email" 
            name="contato.email"
            placeholder="Qual o seu Email?" 
            required>
        </div>
        <div class="form-group">
          <label for="lblTelefone">Telefone</label>
          <div class="input-group">
            <input 
              type="tel" 
              class="form-control" 
              id="telefone" 
              name="contato.telefone"
              placeholder="Qual o seu Telefone?" 
              pattern="[\+]\d{2}[\(]\d{2}[\)]\d{4}[\-]\d{4}">
              
            <span class="input-group-btn">
              <button type=button class="btn btn-default" aria-label=Help data-toggle="tooltip" data-placement="top" title="Formato: +99(99)9999-9999">
                <span class="glyphicon glyphicon-question-sign"></span>
              </button>
            </span>
          </div>
        </div>
        <div class="form-group">
          <button type="submit" class="btn btn-default" id="salvar">Gravar Contato</button>
        </div>
      </form>  
    
    </div>
    
    <br>
    <br>
    
    <div class="container">
      
      <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">Lista de Contatos</div>
           
          <div class="panel-body">
          <p>
            
        <form class="form-inline">
        
        <div class="form-group">
          
          <input 
            type="text" 
            class="form-control" 
            id="filtro" 
            placeholder="Qual contato você procura?" 
            >
        </div>
        
        <button type="button" class="btn btn-info" id="search">Procurar</button> &nbsp;&nbsp;
        <button type="button" class="btn btn-info" id="loadAll">Carregar Tudo</button>
        
      </form>  
      </p>
           </div>            
          
          <div class="table-responsive">
              <table class="table table-hover table-bordered" id="contatos">
               <thead>
                 <tr>
                   <td>Nome</td>
                   <td>Email</td>
                   <td>Telefone</td>
                 </tr>
               </thead>
               <tbody></tbody>
              </table>
            </div>
      </div>
    </div>
    
    <div class="container">
      
      <hr>

      <footer>
        <p>&copy; SW9 - 2018</p>
      </footer>
    </div> <!-- /container -->        

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/indexedDb.js"></script>
        
        <!-- Implementação das operações da página de contato usando idb + promise -->
        <script src="js/idbLib.js"></script>
        
        <!-- Implementação das operações da página de contato usando idb + promise -->
        <script src="js/idbp.js"></script>
        
        <script src="js/idbx.js"></script>
        
        <script src="js/storage.js"></script>
        <script src="js/main.js"></script>
        
        
        <!-- Alteracao 19-10 - Referencia incluida -->
        <script src="js/init.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
            
            
            $(function () {
              $('[data-toggle="tooltip"]').tooltip()
            })

            //Carregar todos os contatos na Grid durante o carregamento da página
            //Alteracao 19-10 - getAll comentado
            //getAll(localStorage.getItem("db"));
            
            var form  = document.getElementsByTagName('form')[0];

            //Definindo o evento de submit do formulário de contato
            form.addEventListener("submit", function (event) {
              
              
              if (form.checkValidity()) {
               console.info("Formulário Validado Com Sucesso"); 
               
               //Usando a interface FormData para recuperar dados do formulário
               //Criando objeto
               var formData = new FormData(form);
               
               
               var contact = {
                 'nome': formData.get("contato.nome"),
                 'email': formData.get("contato.email"),
                 'telefone': formData.get("contato.telefone")
               };
                
               //Salvar Contato
               save(localStorage.db, contact);
               
               //Limpar formulário
               form.reset();
               
               //Prevenir Refresh
               event.preventDefault();
              
               
              } else {
                console.error("Existem Erros No formulário");
              }
            }, false);


           
        </script>
        
       
        
    </body>
</html>
